{% extends 'ToP/base.html' %}
{% load static %}
{% block title %}Upload Units{% endblock %}

{% block content %}
<div style="text-align: center;">
    <h2>Upload Units Data (CSV Format only)</h1>

    {% if messages %}
        {% for message in messages %}
            <p style="color: {% if message.tags == 'success' %}green{% else %}red{% endif %};">
                {{ message }}
            </p>
        {% endfor %}
    {% endif %}

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Mode Selection -->
        <div style="margin-bottom: 20px;">

            <label style="margin-left: 20px;">
                <input type="radio" name="upload_mode" value="insert_new" checked>
                Insert New Records (No Duplicates)
            </label>
        </div>

        <!-- File Input -->
        <input type="file" name="csv_file" required>

        <!-- Submit Button -->
        <button 
            type="submit" 
            style="
                padding: 5px 10px; 
                background-color: rgb(156, 156, 156); 
                color: white; 
                border: none; 
                border-radius: 4px; 
                cursor: pointer; 
                font-size: 20px; 
                height: fit-content; 
                margin-top: auto;
                transition: all 0.3s ease;
            "
            onmouseover="this.style.backgroundColor='rgb(120, 120, 120)'; this.style.transform='scale(1.05)';"
            onmouseout="this.style.backgroundColor='rgb(156, 156, 156)'; this.style.transform='scale(1)';"
        >
            Upload
        </button>
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
